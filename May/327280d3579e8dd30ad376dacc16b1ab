The 18-year-old Texas gunman who massacred 19 children and two teachers at Robb Elementary School on Tuesday burst out of a closet and opened fire on US Customs and Border Protection tactical agents as they entered the classroom where he was barricaded, according to reports. Gunman Salvador Ramos emerged from his hiding spot and opened fire just after two Customs and Border Protection BORTAC agents, a Border Patrol Search, Trauma and Rescue agent and at least one sheriff’s deputy entered the classroom around 12:50 p.m. huddled behind a tactical shield, an anonymous CBP official told The Washington Post. The agents returned fire and killed Ramos, putting an end to his reign of terror, according to the report. The move to bust into the classroom capped off a roughly 40-minute period of indecision outside of the room as law enforcement came up with a plan. An off-duty BORTAC agent was the first to arrive outside of the “quiet” classroom at 12:15 p.m. and found several local police officers in the hallway there, the CBP official told The Washington Post. There were bullet holes in the classroom door, which local cops told the off-duty agent were from Ramos firing at them. The agent began concocting a tactical operation to get inside, and reinforcements from CBP arrived around 15 minutes later, the source told the paper. The other BORTAC agents, along with members from ICE’s Homeland Security Investigations unit, were late to get to the classroom after they were initially told by local police to wait outside the school upon arriving, two federal law enforcement sources told NBC News. The HSI agents had been instructed to instead help retrieve children from the windows. But after roughly 30 minutes, the agents from both agencies ignored local law enforcement and entered the school, the report said. With no battering ram on site to bust the classroom door down, agents opted to use a ballistic shield provided by a U.S. Marshal. It was difficult to determine who had authority over the operation, the source said. “They have not told me they were frustrated,” the official told the newspaper. “But they told me it was hard to discern who was in charge.” The first BORTAC agent who arrived wanted to breach the door and get to the shooter immediately with the small team assembled outside. In the meantime, CBP and other law enforcement officers evacuated students and staff from other classrooms, the source said. Officers sent for a key to unlock the classroom, which reportedly took 40 minutes to an hour to retrieve from a janitor. The agent said he heard no shots fired during that period of time, according to The Washington Post. The team made their entry “within minutes” of getting the key, the official told the paper. Officials said they entered around 12:50 p.m.