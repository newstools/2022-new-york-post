SAN FRANCISCO — These kings of late-inning drama were just getting started as much of their East Coast fan base was fading off into a haze. But the difference in this latest miraculous Mets comeback was a counterpunch. The Giants offered not one, but two on a wild Tuesday night. Edwin Diaz allowed two runs in the ninth, including a walk-off RBI single to Brandon Crawford that sent the Mets to a 13-12 loss at Oracle Park. Joc Pederson was the offensive hero, with three home runs and an RBI single in the ninth that tied the game before Crawford won it moments later. “Great game for fans,” manager Buck Showalter said. “I am really proud of our guys. That is fun to watch. It’s remarkable to watch them compete every night.” Diaz got Tommy La Stella to hit into a double play for two quick outs in the ninth, but then allowed a walk and three straight singles to blow his second save in his last three attempts. “When I came into the game I said, ‘This game is over,’ ” Diaz said. “But after two outs they got me today.” Dominic Smith tripled leading off the ninth and pinch-runner Travis Jankowski scored on Brandon Nimmo’s sacrifice fly to put the Mets ahead 12-11. Buried in a six-run hole, the Mets created buzz in the seventh inning and then went bonkers in the eighth to take an 11-8 lead before Pederson’s third homer of the game, a three-run blast against Drew Smith, tied it. Showalter said he didn’t use left-hander Joely Rodriguez in that spot, because the Giants likely would have countered with Evan Longoria. The manager was also cognizant of wanting to preserve relievers with rookie Thomas Szapucki set for recall from Triple-A Syracuse to start Wednesday’s series finale. “I thought Drew was one of our best pitchers,” Showalter said. “We’re trying to live to fight another day, too. We have another game [Wednesday] with a starter we don’t know how far he is going to go.” Francisco Lindor slapped a bases-loaded triple in the eighth that put the Mets ahead, but this was a rally that had plenty of heroes. And the team’s ability to put the ball in play and pressure the defense was at the forefront in an inning the Mets had three infield hits. With the Mets behind 8-4 (Lindor had smashed a two-run homer the previous inning), Jeff McNeil and Eduardo Escobar singled in succession to begin the epic rally. Mark Canha’s single off the shortstop Crawford loaded the bases and Smith awoke from a slumber to deliver a two-run single that pulled the Mets within 8-6. After Luis Guillorme was retired on a fielder’s choice, Nimmo hit a slow grounder to third and beat Kevin Padlo’s throw, loading the bases. Starling Marte followed with a hard grounder off Padlo that brought in Smith. Lindor’s grounder past third base — which Pederson overran in left field — unloaded the bases and gave the Mets an 11-8 lead. “I’m super proud of everybody here,” Lindor said. “We got down early and did what it took to come back and finish hard.” Chris Bassitt allowed three “bye-bye babies” to the Giants and never got through the fifth inning. The performance was a rare clunker for a Mets starting pitcher this season. Bassitt (who arrived from across the Bay Bridge in Oakland in a March trade) surrendered eight earned runs on eight hits and three walks over 4 ¹/₃ innings in his worst start in a Mets uniform. In his start against the Cardinals last week Bassitt also scuffled, allowing four earned runs over 6 ¹/₃ innings. But his biggest tormentors have been the Giants, who also beat him at Citi Field last month, when he allowed five earned runs over six innings. Bassitt allowed his third homer in as many innings, a two-run shot to Joc Pederson in the fifth that buried the Mets in an 8-2 hole. La Stella’s three-run blast in the fourth had extended the Giants’ lead to 6-1. Luis Gonzalez doubled in the inning and Michael Papierski walked before La Stella unloaded into the right-field seats. In the fourth, Bassitt walked Mike Yastrzemski before leaving a cutter over the plate that Pederson blasted for a two-run homer. The Giants jumped on Bassitt from the start. La Stella singled leading off the game and Yastrzemski doubled before Darin Ruf’s ground out brought in a run. Logan Webb was tough on the Mets, allowing two runs on five hits over five innings. Canha stroked an RBI single in the second that tied it 1-1. The Mets got another run in the fifth on Lindor’s sacrifice fly after Brandon Nimmo was hit by a pitch leading off the inning. Stephen Nogosek stepped up in long relief. In his first appearance in nine days, the right-hander fired 3 ²/₃ scoreless innings behind Bassitt. In his only other major league appearance this season Nogosek pitched three scoreless innings against the Nationals.